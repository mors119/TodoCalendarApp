import{j as e,c as x,d as N,r as u,u as C,P as k,M as S,e as R,s as E,f as I,h as A,i as f,R as L}from"./index-C2pazGou.js";import{u as v,R as P,a as $,L as g,C as M,b as B}from"./paginationStore-Dw9cQE_1.js";import{T as b,f as p,R as O,a as z}from"./date-DcI7OpYU.js";import{E as D}from"./EditTodo-XLH45uPm.js";import{T as _}from"./TodoForm-WBNLfwrm.js";import"./index-pxOZ5Uo0.js";const F=(s,r)=>{let t=[];switch(!0){case r<=5:t=Array.from({length:r},(i,a)=>a+1);break;case s<=3:t=[1,2,3,"...",r];break;case s>=r-2:t=[1,"...",r-2,r-1,r];break;default:t=[1,"...",s-1,s,s+1,"...",r]}return t};function G(){const{currentPage:s,setCurrentPage:r,totalPages:t}=v(),i=F(s,t),a=l=>{typeof l=="number"&&l>0&&l<=t&&r(l)};return e.jsxs("div",{className:"inline-flex",children:[e.jsx(y,{direction:"left",onClick:()=>a(s-1),isDisabled:s<=1}),e.jsx("div",{className:"flex -space-x-px",children:i.map((l,c)=>{let o;return c===0&&(o="first"),c===i.length-1&&(o="last"),i.length===1&&(o="single"),l==="..."&&(o="middle"),e.jsx(H,{page:l,position:o,isActive:s===l,onClick:()=>a(Number(l))},c)})}),e.jsx(y,{direction:"right",onClick:()=>a(s+1),isDisabled:s>=t})]})}function H({page:s,isActive:r,position:t,onClick:i}){const a=x("flex h-10 w-10 items-center justify-center text-sm  cursor-pointer",{"rounded-l-md":t==="first"||t==="single","rounded-r-md":t==="last"||t==="single","z-10 bg-amber-300/50":r,"hover:bg-amber-300/20 bg-neutral-300/20":!r&&t!=="middle","text-gray-300":t==="middle"});return e.jsx("div",{className:a,onClick:i,children:s})}function y({direction:s,isDisabled:r,onClick:t}){const i=x("flex h-10 w-10 items-center justify-center rounded-md cursor-pointer",{"pointer-events-none text-gray-300 bg-amber-200/20":r,"hover:opacity-50 bg-amber-300/50":!r,"mr-2 md:mr-4":s==="left","ml-2 md:ml-4":s==="right"}),a=s==="left"?e.jsx(P,{}):e.jsx($,{});return e.jsx("div",{className:i,onClick:r?void 0:t,children:a})}function q({sort:s,add:r}){const{currentPage:t,setTotalPages:i}=v(),{setEditTodo:a,editTodo:l}=N(),[c,o]=u.useState([]),[d,j]=u.useState(0),{member:w}=C();u.useEffect(()=>{(async()=>{try{const m=await I(w,t-1,s);o(m.content),i(m.totalPages)}catch{console.error("Todo 목록 로딩 오류")}})()},[t,d,s,!r]),u.useEffect(()=>{j(n=>n+1)},[l]);const T=async n=>{await A(n.id),o(m=>m.map(h=>h.id===n.id?{...h,complete:h.complete===1?0:1}:h)),j(m=>m+1)};return e.jsxs("div",{children:[e.jsx(g,{grid:{gutter:16,column:1},dataSource:c,renderItem:n=>e.jsx(g.Item,{children:e.jsxs(M,{title:n.title,className:"shadow-md",children:[e.jsx("p",{className:"text-gray-600",children:n.description}),e.jsxs("div",{className:"mt-2 flex justify-between items-center mb-2",children:[n.category?e.jsx(b,{color:"blue",children:n.category}):e.jsx("div",{}),e.jsx(b,{color:n.priority==="A"?"red":"orange",children:k(n.priority)})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[p(n.starts)," ~ ",p(n.ends)]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(b,{className:"cursor-pointer",color:n.complete===1?"green":"red",onClick:()=>T(n),children:n.complete?e.jsxs("span",{children:["완료됨  ",e.jsx(O,{})]}):e.jsxs("span",{children:["진행 중  ",e.jsx(z,{})]})}),e.jsxs("div",{className:"flex",children:[e.jsx(b,{color:"yellow",className:"cursor-pointer",onClick:()=>a(n),children:"수정하기"}),e.jsx(b,{className:"cursor-pointer",onClick:async()=>{S.confirm({title:"삭제하면 복구되지 않습니다.",content:"데이터를 삭제하시겠습니까?",onOk:async()=>{await R(n.id),E.success("데이터가 삭제되었습니다."),j(m=>m+1)}})},children:"삭제하기"})]})]})]})})}),e.jsx("div",{className:"flex justify-center mt-2 sm:mt-4",children:e.jsx(G,{})})]})}function X(){const[s,r]=u.useState(f.ALL),{editTodo:t,resetEditTodo:i}=N(),[a,l]=u.useState(null),[c,o]=u.useState(!1);return u.useEffect(()=>{l(t),o(!1)},[t]),e.jsxs("div",{className:"max-w-3xl mx-auto sm:p-4 relative overflow-hidden min-h-[700px]",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"h-10 mb-4 flex justify-between items-center text-center text-neutral-500",children:[e.jsx("button",{name:"closest",onClick:d=>r(d.target.name),className:x("w-1/4 border border-neutral-300 flex justify-center items-center h-full rounded-l-lg duration-200 cursor-pointer bg-amber-200/20",s===f.CLOSEST&&"bg-amber-300/30 border-none"),children:"최신 순"}),e.jsx("button",{name:"hardest",onClick:d=>r(d.target.name),className:x("w-1/4 border border-neutral-300 flex justify-center items-center h-full duration-200 cursor-pointer bg-amber-200/20",s===f.HARDEST&&"bg-amber-300/30 border-none"),children:"난이도 별"}),e.jsx("button",{name:"inProgress",onClick:d=>r(d.target.name),className:x("w-1/4 border border-neutral-300 flex justify-center items-center h-full duration-200 cursor-pointer bg-amber-200/20",s===f.IN_PROGRESS&&"bg-amber-300/30 border-none"),children:"진행 중"}),e.jsx("button",{name:"all",onClick:d=>r(d.target.name),className:x("w-1/4 border border-neutral-300 flex justify-center items-center h-full rounded-r-lg duration-200 cursor-pointer bg-amber-200/20",s===f.ALL&&"bg-amber-300/30 border-none"),children:"모든"}),e.jsx("div",{className:"w-1/7 justify-end items-center flex",children:e.jsx("button",{onClick:()=>{o(!c),i()},className:"bg-amber-200/20 w-10 h-10 flex justify-center items-center rounded-full border border-neutral-300 hover:bg-amber-300/50 hover:border-neutral-600 cursor-pointer duration-200",children:e.jsx(B,{})})})]}),e.jsx(q,{sort:s,add:c})]}),e.jsx("div",{className:x("top-0 left-0 bg-neutral-200/20 w-full h-full absolute duration-200 z-50 sm:p-4 justify-center flex items-center",a!=null||c?"translate-x-0 opacity-100":"translate-x-full opacity-0"),children:e.jsx("div",{className:"border border-neutral-500 bg-white h-fit rounded-xl sm:p-4 p-2 shadow md:w-[600px] w-full",children:e.jsxs("div",{className:"sm:px-4 sm:pb-4 rounded-md max-w-[600px]",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("div",{}),e.jsx("div",{className:"font-bold text-xl",children:a!=null&&c===!1?"Todo 수정":"Todo 추가"}),e.jsx("button",{className:"cursor-pointer w-6 h-6 rounded-sm flex items-center justify-center hover:bg-amber-200/20",onClick:()=>{o(!1),l(null)},children:e.jsx(L,{className:"hover:rotate-180 duration-300"})})]}),a!=null&&c==!1?e.jsx(D,{}):e.jsx(_,{setAddBtn:()=>o(()=>!c)})]})})})]})}export{X as default};

import{a as T,u as P,r as c,a4 as b,j as e,P as R,M as v,e as w,s as C,a8 as I}from"./index-BBV4Lusk.js";import{u as k,L as m,C as E,P as M}from"./paginationStore-b6NsGNtq.js";import{T as t,f as d,R as L,a as A}from"./date-DgoWteu9.js";import"./index-D-WuSsTS.js";function U(){var l;const{searchKeyword:a,setEditTodo:x,refreshState:n,setRefreshState:h}=T(),{member:o}=P(),{currentPage:i,setTotalPages:u}=k(),[j,f]=c.useState([]),p=b(),[g,y]=c.useState(""),N=(l=p.state)==null?void 0:l.from;c.useEffect(()=>{(async()=>{if(a)try{const r=await I(o,a,i-1,3);f(r.content),u(r.totalPages)}catch(r){console.error("검색 API 호출 실패:",r)}})(),y(a)},[n,o,i]);const S=async s=>{console.log(`완료 상태 변경: ${s.id}`)};return e.jsxs("div",{children:[N!=="/calendar"&&e.jsxs("h2",{className:"text-xl font-bold mb-4",children:['🔍 검색 결과: "',g,'"']}),e.jsx(m,{grid:{gutter:16,column:1},dataSource:j,renderItem:s=>e.jsx(m.Item,{children:e.jsxs(E,{title:s.title,className:"shadow-md",children:[e.jsx("p",{className:"text-gray-600",children:s.description}),e.jsxs("div",{className:"mt-2 flex justify-between items-center mb-2",children:[s.category?e.jsx(t,{color:"blue",children:s.category}):e.jsx("div",{}),e.jsx(t,{color:s.priority==="A"?"red":"orange",children:R(s.priority)})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[d(s.starts)," ~ ",d(s.ends)]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(t,{className:"cursor-pointer",color:s.complete===1?"green":"red",onClick:()=>S(s),children:s.complete?e.jsxs("span",{children:["완료됨  ",e.jsx(L,{})]}):e.jsxs("span",{children:["진행 중  ",e.jsx(A,{})]})}),e.jsxs("div",{className:"flex",children:[e.jsx(t,{color:"yellow",className:"cursor-pointer",onClick:()=>x(s),children:"수정하기"}),e.jsx(t,{className:"cursor-pointer",onClick:async()=>{v.confirm({title:"삭제하면 복구되지 않습니다.",content:"데이터를 삭제하시겠습니까?",onOk:async()=>{await w(s.id),C.success("데이터가 삭제되었습니다."),h(n)}})},children:"삭제하기"})]})]})]})})}),e.jsx("div",{className:"flex justify-center mt-2 sm:mt-4",children:e.jsx(M,{})})]})}export{U as default};

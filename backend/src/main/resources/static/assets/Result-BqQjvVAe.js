import{d as p,u as g,r as c,j as e,P as y,M as N,e as P,s as S,a6 as T}from"./index-C2pazGou.js";import{u as b,L as i,C as R,P as w}from"./paginationStore-Dw9cQE_1.js";import{T as t,f as l,R as C,a as v}from"./date-DcI7OpYU.js";import"./index-pxOZ5Uo0.js";function A(){const{searchKeyword:a,setEditTodo:m}=p(),{member:n}=g(),{currentPage:o,setTotalPages:d}=b(),[x,h]=c.useState([]),[u,j]=c.useState(0);c.useEffect(()=>{(async()=>{if(a)try{const r=await T(n,a,o-1,3);console.log(r),h(r.content),d(r.totalPages)}catch(r){console.error("검색 API 호출 실패:",r)}})()},[a,n,o,u]);const f=async s=>{console.log(`완료 상태 변경: ${s.id}`)};return e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:['🔍 검색 결과: "',a,'"']}),e.jsx(i,{grid:{gutter:16,column:1},dataSource:x,renderItem:s=>e.jsx(i.Item,{children:e.jsxs(R,{title:s.title,className:"shadow-md",children:[e.jsx("p",{className:"text-gray-600",children:s.description}),e.jsxs("div",{className:"mt-2 flex justify-between items-center mb-2",children:[s.category?e.jsx(t,{color:"blue",children:s.category}):e.jsx("div",{}),e.jsx(t,{color:s.priority==="A"?"red":"orange",children:y(s.priority)})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[l(s.starts)," ~ ",l(s.ends)]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(t,{className:"cursor-pointer",color:s.complete===1?"green":"red",onClick:()=>f(s),children:s.complete?e.jsxs("span",{children:["완료됨  ",e.jsx(C,{})]}):e.jsxs("span",{children:["진행 중  ",e.jsx(v,{})]})}),e.jsxs("div",{className:"flex",children:[e.jsx(t,{color:"yellow",className:"cursor-pointer",onClick:()=>m(s),children:"수정하기"}),e.jsx(t,{className:"cursor-pointer",onClick:async()=>{N.confirm({title:"삭제하면 복구되지 않습니다.",content:"데이터를 삭제하시겠습니까?",onOk:async()=>{await P(s.id),S.success("데이터가 삭제되었습니다."),j(r=>r+1)}})},children:"삭제하기"})]})]})]})})}),e.jsx("div",{className:"flex justify-center mt-2 sm:mt-4",children:e.jsx(w,{})})]})}export{A as default};
